<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Halal Guide Near Me</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 2rem;
      background-color: #f9f9f9;
    }
    h1 {
      color: #2c3e50;
    }
    #location, #links {
      margin-top: 20px;
    }
    .link-button {
      display: inline-block;
      margin: 10px;
      padding: 12px 20px;
      background-color: #2c3e50;
      color: #fff;
      border-radius: 5px;
      text-decoration: none;
    }
    .link-button:hover {
      background-color: #1a252f;
    }
  </style>
</head>
<body>
<nav style="background:#0A166C; color:white; padding:10px; text-align:center;">
  <a href="index.html" style="color:white; margin:0 10px; text-decoration:none;">Home</a>
  <a href="annual.html" style="color:white; margin:0 10px; text-decoration:none;">Annual Timetable</a>
  <a href="qibla.html" style="color:white; margin:0 10px; text-decoration:none;">Qibla Locator</a> 
  <a href="halal.html" style="color:white; margin:0 10px; text-decoration:none;">Halal Guide</a>
</nav>
  <h1>üçΩÔ∏è Halal Guide Near Me</h1>
  <p>Finding halal restaurants and mosques near you...</p>

  <div id="location"><em>Locating...</em></div>
  <div id="links" style="display:none;">
    <a id="google-food-link" href="#" class="link-button" target="_blank">Search Halal Food</a>
    <a id="google-mosque-link" href="#" class="link-button" target="_blank">Find Mosques Nearby</a>
  </div>

  <script>
    async function reverseGeocode(lat, lon) {
      try {
        const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lon}`);
        const data = await res.json();
        return {
          city: data.address.city || data.address.town || data.address.village || '',
          state: data.address.state || '',
        };
      } catch {
        return { city: '', state: '' };
      }
    }

    function fallbackLinks() {
      document.getElementById('location').innerText = "Location not available. Showing general search options:";
      document.getElementById('google-food-link').href = "https://www.google.com/search?q=halal+restaurants+near+me";
      document.getElementById('google-mosque-link').href = "https://www.google.com/maps/search/mosque+near+me";
      document.getElementById('links').style.display = "block";
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(async position => {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;
        const { city, state } = await reverseGeocode(lat, lon);

        const cityState = `${city}, ${state}`;
        document.getElementById('location').innerText = `Your location: ${cityState}`;

        const foodSearch = `https://www.google.com/search?q=halal+restaurants+in+${encodeURIComponent(cityState)}`;
        <p>Please verify halal status by calling the establishment</p>
        const mosqueSearch = `https://www.google.com/maps/search/mosque+near+${encodeURIComponent(cityState)}`;

        document.getElementById('google-food-link').href = foodSearch;
        document.getElementById('google-mosque-link').href = mosqueSearch;
        document.getElementById('links').style.display = "block";
      }, fallbackLinks, { timeout: 8000 });
    } else {
      fallbackLinks();
    }
  </script>
</body>
</html>
